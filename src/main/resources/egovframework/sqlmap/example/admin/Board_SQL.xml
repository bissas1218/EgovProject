<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="Board">

	<typeAlias  alias="egovMap" type="org.egovframe.rte.psl.dataaccess.util.EgovMap"/>
	<typeAlias  alias="boardVO" type="egovframework.example.sample.service.BoardVO"/>
	
	<resultMap id="boardMap" class="egovframework.example.sample.service.BoardVO">
		<result property="boardId" column="BOARD_ID"/>
		<result property="boardNm" column="BOARD_NM"/>
		<result property="boardType" column="BOARD_TYPE"/>
		<result property="boardDescrYn" column="BOARD_DESCR_YN"/>
		<result property="boardDescr" column="BOARD_DESCR"/>
	</resultMap>
	
	<select id="boardDAO.selectBoard" parameterClass="String" resultMap="boardMap">
		<![CDATA[
			SELECT BOARD_ID, BOARD_NM, BOARD_TYPE, BOARD_DESCR_YN, BOARD_DESCR
				FROM BOARD
				WHERE BOARD_ID = #boardId#
		]]>
	</select>
	
	<resultMap id="boardListMap" class="egovframework.example.sample.service.BoardVO">
		<result property="boardId" column="BOARD_ID"/>
		<result property="boardNm" column="BOARD_NM"/>
		<result property="boardType" column="BOARD_TYPE"/>
	</resultMap>
	
	<select id="boardDAO.selectBoardTitleList" parameterClass="searchVO" resultMap="boardListMap">
			SELECT BOARD_ID, BOARD_NM, BOARD_TYPE
			FROM BOARD
	</select>
	
	<select id="boardDAO.selectBoardList" parameterClass="searchVO" resultMap="boardListMap">
			SELECT BOARD_ID, BOARD_NM, BOARD_TYPE
			FROM BOARD
			WHERE 1=1
			<isNotEqual prepend="AND" property="searchKeyword" compareValue="all">
				BOARD_TYPE = #searchKeyword#
			</isNotEqual>
			ORDER BY BOARD_ID DESC
			LIMIT #recordCountPerPage# OFFSET #firstIndex#	
	</select>
	
	<select id="boardDAO.selectBoardListTotCnt" parameterClass="searchVO" resultClass="Integer">
			SELECT count(*)
			FROM BOARD
			WHERE 1=1
			<isNotEqual prepend="AND" property="searchKeyword" compareValue="all">
				BOARD_TYPE = #searchKeyword#
			</isNotEqual>
	</select>
	
	<select id="boardDAO.selectNewBoardId" resultClass="String">
    	<![CDATA[
    		SELECT MAX(RIGHT(BOARD_ID, 4)) + 1 FROM BOARD
    	]]>
    </select>
    
	<insert id="boardDAO.boardInsert" parameterClass="boardVO">
		<![CDATA[
			INSERT INTO BOARD (
				BOARD_ID,
				BOARD_NM,
				BOARD_TYPE,
				BOARD_DESCR_YN,
				BOARD_DESCR
			) VALUES 
			(#boardId#, #boardNm#, #boardType#, #boardDescrYn#, #boardDescr#)
		]]>
	</insert>
	
	<update id="boardDAO.updateBoard" parameterClass="boardVO">
		<![CDATA[
			UPDATE BOARD SET 
				BOARD_NM = #boardNm#, 
				BOARD_TYPE = #boardType#, 
				BOARD_DESCR_YN = #boardDescrYn#,
				BOARD_DESCR = #boardDescr#
				WHERE BOARD_ID = #boardId#
		]]>
	</update>
	
</sqlMap>